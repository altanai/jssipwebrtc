<!doctype html>

<html>
	<head>
		<title>tryit-jssip</title>
		<meta charset='UTF-8'>
		<meta name='viewport' content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no'>

		<!-- static -->
		<!-- <link rel='stylesheet' href='resources/css/tryit-jssip.css'> -->

		<!-- from react generated -->
		<link rel='stylesheet' href='tryit-jssip.css'>

		<script src='resources/js/antiglobal.js'></script>
		<script>
			// Set debug
			window.localStorage.setItem('debug', '* -engine* -socket* *ERROR* *WARN*');

			// Set antiglobal
			// window.antiglobal('___browserSync___oldSocketIo', 'JSON3', 'io', '___browserSync___', '__core-js_shared__', 'MediaStream', 'RTCPeerConnection', 'callstats', 'jssipCallstats');
			// setInterval(window.antiglobal, 5000);
		</script>
		<script src='https://api.callstats.io/static/callstats.min.js'></script>
		<script src='https://api.callstats.io/static/callstats-jssip.min.js'></script>

		<script>
			// Uncomment and fill the SETTINGS object in order to use hardcoded settings
			//
			// You don't need to set display_name nor uri, they can be set via HTTP form in
			// the Login section of the web
			//
			window.SETTINGS =
			{
				display_name        : null,
				uri                 : null,
				password            : null,
				socket              :
				{
					uri           	: 'wss://tryit.jssip.net',
					via_transport 	: 'auto',
				},
				registrar_server    : null,
				contact_uri         : null,
				authorization_user  : null,
				instance_id         : null,
				session_timers      : true,
				use_preloaded_route : false,
				pcConfig            :
				{
					rtcpMuxPolicy : 'negotiate',
					iceServers    :
					[
						{ urls : [ 'stun:stun.l.google.com:19302' ] }
					]
				},
				callstats           :
				{
					enabled   : true,
					AppID     : "548881347",
					AppSecret : "uh2bBkcSCXJX:yMBcfVwrSYaTm40pG/T99lxI/TBeyqjRgQhIKuxEeF0="
				}
			};
		</script>
		<!-- react -->
		<script src='tryit-jssip.js'></script>

		<!-- static -->
		<!-- <script src='resources/js/jssip.js'></script> -->
	</head>

	<body>
		<h3> Demo webRTC with kamailio </h3>
		<div id='tryit-jssip-container'></div>
		<div id='tryit-jssip-media-query-detector'></div>
	</body>

	<script>
			// Callstats.io 
			var AppID = "548881347";
			var AppSecret = "uh2bBkcSCXJX:yMBcfVwrSYaTm40pG/T99lxI/TBeyqjRgQhIKuxEeF0=";

			var callstats = new callstats();
			callstats.initialize(AppID, AppSecret, localUserID, csInitCallback, csStatsCallback, configParams);
			//callstatsjssip(ua, appID, appSecret);

			var usage = callstats.fabricUsage.multiplex;
			var fabricAttributes = {
			    remoteEndpointType:   callstats.endpointType.peer,
			    fabricTransmissionDirection:  callstats.transmissionDirection.sendrecv
			};

			//remoteUserID is the recipient's userID
			//conferenceID is generated or provided by the origin server (webrtc service)
			callstats.addNewFabric(pcObject, remoteUserID, usage, conferenceID, fabricAttributes, pcCallback);
</html>
